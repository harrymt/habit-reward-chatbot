#!/usr/bin/env node

'use strict';

console.log('Sending reminders..');

// Send to logging service
const request = require('request-promise');

const options = {
  method: 'GET',
  uri: 'https://nosnch.in/9e699ea11f'
};
request(options)
  .then(response => {
    console.log(response);
    sendReminders();
  })
  .catch(err => {
    console.log(err);
    sendReminders();
  });

let hasSent = false;

// Check if debug args are passed into function
process.argv.forEach((val, index) => {
  if (index === 2) {
    // Actually send the reminders here
    require('../reminders').sendReminders(val);
    hasSent = true;
  }
});

if (!hasSent) {
  // Actually send the reminders here
  require('../reminders').sendReminders();
}
